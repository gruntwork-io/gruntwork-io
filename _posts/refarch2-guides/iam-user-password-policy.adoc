---
title: [title]
categories: Upgrades
image: /assets/img/guides/refresh_icon.png
excerpt: Learn how to update your v1 Reference Architecture to use the Gruntwork Service Catalog.
tags: ["aws", "terraform", "terragrunt"]
cloud: ["aws"]
redirect_from: /static/guides/upgrades/how-to-update-your-ref-arch/
---
:page-type: guide
:page-layout: post

:toc:
:toc-placement!:

// GitHub specific settings. See https://gist.github.com/dcode/0cfbf2699a1fe9b46ff04c41721dda74 for details.
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
toc::[]
endif::[]

== iam-user-password-policy service migration guide

*NOTE: There is no service catalog module for setting an IAM user password policy, but the library module
(`[iam-user-password-policy](https://github.com/gruntwork-io/terraform-aws-security/blob/master/modules/iam-user-password-policy/)`)
is designed to be deployed directly, like a Service Catalog module.*

=== Estimated Time to Migrate: 5 minutes per environment

=== New Outputs

The `iam-user-password-policy` module in `terraform-aws-security` defines several new outputs that did not previously
exist. Refer to
https://github.com/gruntwork-io/terraform-aws-security/blob/v0.46.6/modules/iam-user-password-policy/outputs.tf[`outputs.tf`].

=== State Migration Script

Run the provided migration script (contents pasted below for convenience) to migrate the state in a backward compatible
way:

....
terragrunt state mv module.password_policy.aws_iam_account_password_policy.main 'aws_iam_account_password_policy.main[0]'
....

=== Breaking Changes

This change is fully backward compatible, provided the state migration command above is run.
